CREATE OR REPLACE PROCEDURE STATS_APEX.QA_SCHEDULE_RULE (V_RULE_ID INTEGER,V_EXEC_TIME DATE DEFAULT CURRENT_DATE) AS
BEGIN

IF V_EXEC_TIME < CURRENT_DATE THEN
RAISE_APPLICATION_ERROR(-20000,'Date is in the past. Please put a future date.');
END IF;

IF F_DATE(TO_CHAR(CURRENT_DATE,'MMDDYYYY HH:MI AM')) = 0 THEN
RAISE_APPLICATION_ERROR(-20001,'Not a valid date. Please provide correctly formated date (e.g. MMDDYYYY HH:MI AM');
END IF;

INSERT INTO QA_EXEC_SCHEDULE(RULE_ID,EXEC_TIME)
VALUES(V_RULE_ID,V_EXEC_TIME);
COMMIT;

EXCEPTION
   WHEN OTHERS
   THEN
      RAISE;
      
END;
/
